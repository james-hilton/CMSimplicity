<!doctype html>
<html>
<head>
    <title>CMSimplicity Alpha 0.1</title>
    <link href="./css/main.css" rel="stylesheet" type="text/css" />
    
</head>
<body class="horizontal">
    <header>
        <h1>CMSimplicity</h1>
        <nav>
            <button class="neutral" onclick="LoadPages();">Refresh</button>
            <button class="danger" onclick="DeletePage();">Delete</button>
            <button class="safe" onclick="Save();">Save</button>
            <!--<button class="warning" onclick="RenamePage();">Rename</button>-->
        </nav>
    </header>
    <nav id="nav">
        <button id="n1" onclick="Edit(0);" class="current">HTML</button>
        <button id="n2" onclick="Edit(1);" class="">CSS</button>
        <button id="n3" onclick="Edit(2);" class="">JavaScript</button>
        <button id="n4" onclick="Edit(3);" class="">Meta Data</button>
        <button class="">Sub-Sections</button>
    </nav>
    <nav id="pages" class="vertical">
        <div class="pages"><h3 class="pages">Information Pages</h3><button onclick="NewPage();">+</button></div>
        <ul id="info" class="pages"></ul>
        <h3 class="pages">Project Pages</h3>
        <ul id="project" class="pages"></ul>

        <h3 class="pages">Galleries</h3>
        <ul id="galleries" class="pages"></ul>
    </nav>
    <section id="main-page" class="vertical">
        <!-- Page Options -->



        <div id="output"></div>
        <div id="editor1" style="width:100%;height:100%;"></div>
        <div id="editor2" style="width:100%;height:100%;"></div>
        <div id="editor3" style="width:100%;height:100%;"></div>
        <div id="metadata" style="width:100%;height:100%;">
            <table>
                <thead>
                    <tr>
                        <th style="width:20%;">Attribute</th>
                        <th style="width:80%;">Value</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Title -->
                    <tr>
                        <td>Title</td>
                        <td><input id="md_title" type="text" /></td>
                    </tr>
                    <!-- Description -->
                    <tr>
                        <td>Descritption</td>
                        <td><textarea id="md_description"></textarea></td>
                    </tr>
                    <!-- Keywords -->
                    <tr>
                        <td>Keywords</td>
                        <td><textarea id="md_keywords"></textarea></td>
                    </tr>
                    
                    <!-- og:title -->
                    <tr>
                        <td>Social Media Title</td>
                        <td><input id="md_og_title" type="text"/></td>
                    </tr>
                    <!-- og:description -->
                    <tr>
                        <td>Social Media Description</td>
                        <td><textarea id="md_og_desription"></textarea></td>
                    </tr>
                    <!-- og:image -->
                    <tr>
                        <td>Social Media Image</td>
                        <td><input id="md_og_image" type="text"/></td>
                    </tr>

                </tbody>
                
            </table>

        </div>
    </section>

    <!-- Scripts for ACE -->
    <script src="./src/ace.js" data-ace-base="src" type="text/javascript" charset="utf-8"></script>
    <!--<script src="./node_modules/ace-builds/src-noconflict/keybinding-vim.js"></script>
    <script src="./node_modules/ace-builds/src-noconflict/keybinding-emacs.js"></script>-->

    <script>
        var references = [];
        var e_areas = [];
        var nav = document.getElementById("nav");
        var regions = document.getElementById("main-page");

        function BuildNavButton(x, name) {
            var tmp = "<button id=\"n" + x + "\" onclick=\"Edit("+x+");\" ";
            if (x < 0) { tmp += "class=\"current\" ";}
            tmp += ">" + name + "</button>";
            nav.innerHTML += tmp;
        }

        function BuildRegion(name,data) {
            if (data.language == "html" || data.language == "css" || data.language == "javascript") {
                regions.innerHTML += "<div id=\"editor-" + name + "\" style=\"width: 100 %;height: 100 %;\"></div>";
                var tmp = ace.edit("editor-" + name);
                tmp.setTheme("ace/theme/twilight");
                tmp.session.setMode("ace/mode/" + data.language);
                tmp.setShowPrintMargin(false);
                references.push([document.getElementById("editor-" + name), tmp]);
            }
            else if (data.language == "text") {

            }
            else if (data.language == "list") {
            
            }
        }

        function GenerateRegions(template_regions) {
            var tmp = [];
            references = [];

            var counter = 0;
            for (data in template_regions) {
                if (template_regions[data].editable == "true") {
                    BuildNavButton(counter, data);
                    BuildRegion(data, template_regions[data]);
                    counter++;
                }
            }

            var editor1 = ace.edit("editor1");
            editor1.setTheme("ace/theme/twilight");
            editor1.session.setMode("ace/mode/html");
            editor1.setShowPrintMargin(false);

            var editor2 = ace.edit("editor2");
            editor2.setTheme("ace/theme/twilight");
            editor2.session.setMode("ace/mode/css");
            editor2.setShowPrintMargin(false);

            var editor3 = ace.edit("editor3");
            editor3.setTheme("ace/theme/twilight");
            editor3.session.setMode("ace/mode/javascript");
            editor3.setShowPrintMargin(false);

            // meta data tags
            var metadata = {
                title: document.getElementById("md_title"),
                Description: document.getElementById("md_description"),
                Keywords: document.getElementById("md_keywords"),
                og_title: document.getElementById("md_og_title"),
                og_description: document.getElementById("md_og_desription"),
                og_image: document.getElementById("md_og_image")
            }
        }
    
        var current_area = 0;
        // grab editor areas
        var e_areas = [];
        e_areas.push(document.getElementById("editor1"));
        e_areas.push(document.getElementById("editor2"));
        e_areas.push(document.getElementById("editor3"));
        e_areas.push(document.getElementById("metadata"));
        // control editor view
        function Edit(x) {
            // for editors
            for (var i = 0; i < e_areas.length; i++) {
               
                if (i == x) {
                    e_areas[i].style.display = "block";
                    document.getElementById("n" + (i + 1) + "").classList = "current";
                    current_area = x;
                }
                else {
                    e_areas[i].style.display = "none";
                    document.getElementById("n" + (i+1) + "").classList = "";
                }
            }
            Display(x);
        }
        

    </script>

    <!-- CMS scripts -->
    <script src="./scripts/overview.js" type="text/javascript"></script>
</body>
</html>